---
// Import SCSS - Astro will compile and optimize automatically
import '../scss/main.scss';

interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Levan Vekua - Web Designer & Developer based in New York. Specializing in modern web development, UI/UX design, and creating exceptional digital experiences." />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<!-- Security headers -->
		<meta http-equiv="X-Content-Type-Options" content="nosniff" />
		<meta http-equiv="X-Frame-Options" content="DENY" />
		<meta http-equiv="X-XSS-Protection" content="1; mode=block" />
		<meta name="referrer" content="strict-origin-when-cross-origin" />
		
		<!-- Additional SEO meta tags -->
		<meta name="robots" content="index, follow" />
		<meta name="author" content="Levan Vekua" />
		<meta name="theme-color" content="#0066cc" />
		
		<link rel="icon" type="image/x-icon" href="/img/favicon.ico" />
		<meta name="generator" content={Astro.generator} />
		
		<!-- Preload critical resources for faster LCP -->
		<link rel="preload" href="/img/logo.svg" as="image" type="image/svg+xml" />
		<link rel="preload" href="/img/lv-background.webp" as="image" type="image/webp" />
		
		<!-- DNS prefetch for external resources -->
		<link rel="dns-prefetch" href="//fonts.googleapis.com" />
		<link rel="dns-prefetch" href="//www.googletagmanager.com" />
		
		<!-- Simple performance optimization - minimal critical styles -->
		<style is:inline>
			/* Prevent FOUC while CSS loads */
			html { font-family: system-ui, sans-serif; }
			body { margin: 0; line-height: 1.6; }
			.loader { 
				position: fixed; 
				top: 50%; 
				left: 50%; 
				transform: translate(-50%, -50%); 
				z-index: 9999; 
				width: 40px; 
				height: 40px; 
				border: 4px solid #f3f3f3; 
				border-top: 4px solid #0066cc; 
				border-radius: 50%; 
				animation: spin 1s linear infinite; 
			}
			@keyframes spin { 
				0% { transform: translate(-50%, -50%) rotate(0deg); } 
				100% { transform: translate(-50%, -50%) rotate(360deg); } 
			}
		</style>
		
		<title>{title}</title>
		
		<!-- Google Tag Manager -->
		<script is:inline>
		(function(w,d,s,l,i){
			w[l]=w[l]||[];
			w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
			var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
			j.async=true;
			j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
			f.parentNode.insertBefore(j,f);
		})(window,document,'script','dataLayer','GTM-WLB3LWS');
		</script>
		<!-- End Google Tag Manager -->
	</head>
	<body>
		<slot />
		
		<!-- Google Tag Manager (noscript) -->
		<noscript>
			<iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WLB3LWS" height="0" width="0"
				style="display:none;visibility:hidden"></iframe>
		</noscript>
		<!-- End Google Tag Manager (noscript) -->
		
		<script is:inline>
			// Hide loader when page loads
			window.addEventListener('load', function() {
				const spinner = document.getElementById('spinner');
				if (spinner) {
					spinner.style.display = 'none';
				}
			});
		</script>
		
		<!-- Fallback for users with JavaScript disabled -->
		<noscript>
			<style>
				.loader { display: none !important; }
				.nav { position: static !important; }
				.menu-toggle { display: none !important; }
				.nav ul { 
					display: block !important; 
					position: static !important;
					background: transparent !important;
				}
			</style>
		</noscript>
	</body>
</html>